{
    "id": "create-file-refs",
    "type": "function",
    "poll": true,
    "description": "creates outputs of references to files on a tapis system",
    "installer": "pip",
    "runtime": "python:3.9",
    "packages": [
        "tapipy==1.2.20"
    ],
    "input": {
        "TAPIS_USERNAME": {
            "type": "string",
            "value_from": {
                "env": "TAPIS_USERNAME"
            }
        },
        "TAPIS_PASSWORD": {
            "type": "string",
            "value_from": {
                "env": "TAPIS_PASSWORD"
            }
        },
        "TAPIS_SYSTEM_ID": {
            "type": "string",
            "value_from": {
                "env": "TAPIS_SYSTEM_ID"
            }
        },
        "MANIFEST_FILES_PATH": {
            "type": "string",
            "value_from": {
                "env": "MANIFEST_FILES_PATH"
            }
        },
        "TAPIS_BASE_URL": {
            "type": "string",
            "value_from": {
                "params": "base_url"
            }
        }
    },
    "code": "aW1wb3J0IGpzb24KCmZyb20gdGFwaXB5LnRhcGlzIGltcG9ydCBUYXBpcwpmcm9tIG93ZV9weXRob25fc2RrLnJ1bnRpbWUgaW1wb3J0IGV4ZWN1dGlvbl9jb250ZXh0IGFzIGN0eAoKc3lzdGVtX2lkID0gY3R4LmdldF9pbnB1dCgiVEFQSVNfU1lTVEVNX0lEIikKdXNlcm5hbWUgPSBjdHguZ2V0X2lucHV0KCJUQVBJU19VU0VSTkFNRSIpCnBhc3N3b3JkID0gY3R4LmdldF9pbnB1dCgiVEFQSVNfUEFTU1dPUkQiKQptYW5pZmVzdF9maWxlc19wYXRoID0gY3R4LmdldF9pbnB1dCgiTUFOSUZFU1RfRklMRVNfUEFUSCIpCmJhc2VfdXJsID0gY3R4LmdldF9pbnB1dCgiVEFQSVNfQkFTRV9VUkwiKQoKdHJ5OgogICAgdCA9IFRhcGlzKAogICAgICAgIGJhc2VfdXJsPWJhc2VfdXJsLAogICAgICAgIHVzZXJuYW1lPXVzZXJuYW1lLAogICAgICAgIHBhc3N3b3JkPXBhc3N3b3JkCiAgICApCgogICAgdC5nZXRfdG9rZW5zKCkKZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgY3R4LnN0ZGVycigxLCBlLm1lc3NhZ2UpCgpmaWxlcyA9IHQuZmlsZXMubGlzdEZpbGVzKHN5c3RlbUlkPXN5c3RlbV9pZCwgcGF0aD1tYW5pZmVzdF9maWxlc19wYXRoKQoKZm9yIGksIGZpbGUgaW4gZW51bWVyYXRlKGZpbGVzKToKICAgIGN0eC5zZXRfb3V0cHV0KGYiZmlsZXtpfSIsIGpzb24uZHVtcHMoZmlsZS5fX2RpY3RfXykpCgojIFNldCB0aGUgdXNlcm5hbWUsIHBhc3N3b3JkLCBzeXN0ZW1faWQsIGFuZCBiYXNlX3VybCBhcyBvdXRwdXRzCmN0eC5zZXRfb3V0cHV0KCJ1c2VybmFtZSIsIHVzZXJuYW1lKQpjdHguc2V0X291dHB1dCgicGFzc3dvcmQiLCBwYXNzd29yZCkKY3R4LnNldF9vdXRwdXQoInRhcGlzX3N5c3RlbV9pZCIsIHN5c3RlbV9pZCkKY3R4LnNldF9vdXRwdXQoInRhcGlzX2Jhc2VfdXJsIiwgYmFzZV91cmwpCgpjdHguc3Rkb3V0KCJIZWxsbyBzdGRvdXQgLSBjcmVhdGUtZmlsZS1yZWZzIik=",
    "depends_on": [
      
    ]
}